{{page-title 'Live'}}

<div id='live' data-test-live>
  <LiveHeader
    @tabs={{this.TABS}}
    @activeTab={{this.activeTab}}
    @tabHandler={{this.tabHandler}}
  />
  {{! TODO - add more else if statement instead of only else }}
  {{#if (eq this.activeTab 'Screenshare')}}
    {{#if this.liveService.isLoading}}
      <div data-test-loading>
        <Fa-Icon @size='2x' @icon='circle-notch' @spin={{true}} />
      </div>
    {{else}}
      {{#if this.liveService.isJoined}}
        <div class='live__container'>
          <div class='live__video-container' data-test-video-container>
            {{! TODO - add skeleton to the whole structure }}
            {{#if this.isLoading}}
              <Reusables::Skeleton />
            {{else}}
              {{! TODO - Remove this dummy src and it's video }}
              <VideoScreen @src='/assets/starting-soon.mp4' />
            {{/if}}
          </div>
          <div class='container__sidebar'>
            {{#if this.isLoading}}
              <Reusables::Skeleton />
            {{else}}
              <LiveSidebar
                @peers={{this.liveService.peers}}
                @hostProfilePicture={{this.login.userData.picture.url}}
              />
            {{/if}}
          </div>
        </div>
        <div class='live__panel-container'>
          {{#if this.isLoading}}
            <Reusables::Skeleton />
          {{else}}
            <LivePanel
              @isScreenShareOn={{this.liveService.isScreenShareOn}}
              @isCopied={{this.isCopied}}
              @role={{this.role}}
              @buttonClickHandler={{this.buttonClickHandler}}
            />
          {{/if}}
        </div>
      {{else}}
        <LiveJoin
          @name={{this.name}}
          @inputHandler={{this.inputHandler}}
          @clickHandler={{this.clickHandler}}
        />
      {{/if}}
    {{/if}}
  {{else}}
    {{! TODO - add the respective component here }}
    <p>{{this.activeTab}} Component</p>
  {{/if}}

</div>