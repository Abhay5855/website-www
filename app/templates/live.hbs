{{page-title 'Live'}}

<div id='live' data-test-live>
  <LiveHeader
    @tabs={{this.TABS}}
    @activeTab={{this.activeTab}}
    @tabHandler={{this.tabHandler}}
  />
  {{! TODO - add more else if statement instead of only else }}
  {{#if (eq this.activeTab 'Screenshare')}}
    {{#if this.liveService.isLoading}}
      <div data-test-loading class='live__loading'>
        <Fa-Icon @size='2x' @icon='circle-notch' @spin={{true}} />
      </div>
    {{else}}
      {{#if this.liveService.isJoined}}
        <div class='live__video-container' data-test-video-container>
          {{! TODO - add skeleton to the whole structure }}
          {{#if this.isLoading}}
            <Reusables::Skeleton />
          {{else}}
            {{! TODO - Remove this dummy src and it's video }}
            <VideoScreen @src='/assets/birds_footage.mp4' />
            {{! TODO - Remove this dummy button and replace with proper pannel }}
            <Reusables::Button
              @variant='dark'
              @text='Leave Room'
              @onClick={{this.leaveSession}}
            />
            {{! TODO - Remove this dummy button and replace with proper pannel }}
            {{#if (eq this.role 'host')}}
              <Reusables::Button
                @variant='dark'
                @text={{if this.isCopied 'Copied âœ…' 'Invite link'}}
                @onClick={{this.copyInviteLink}}
              />
              <Reusables::Button
                @variant='dark'
                @text={{if
                  this.liveService.isScreenShareOn
                  'Stop Share'
                  'Screen Share'
                }}
                @onClick={{this.screenShare}}
              />
            {{/if}}
          {{/if}}
        </div>
        <div class='live__panel-container'>
          <LivePanel
            @isScreenShareOn={{this.liveService.isScreenShareOn}}
            @isCopied={{this.isCopied}}
            @role={{this.role}}
            @buttonClickHandler={{this.buttonClickHandler}}
          />
        </div>
      {{else}}
        <LiveJoin
          @name={{this.name}}
          @inputHandler={{this.inputHandler}}
          @clickHandler={{this.clickHandler}}
        />
      {{/if}}
    {{/if}}
  {{else}}
    {{! TODO - add the respective component here }}
    <p>{{this.activeTab}} Component</p>
  {{/if}}

</div>